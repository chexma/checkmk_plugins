# def inventory_sittig_ars(info):
#     return [(line[0], None) for line in info]
# 
# def check_sittig_ars(item, params, info):
#     for line in info:
#         if line[0] == item:
#                 if line[1:] == [ "2", "2", "2", "4" ]: # online, online, bothonline, offlineok
#                     return (0, "OK - online")
#         else:
#             return (2, "CRIT - offline or partially offline")
#             
#         return (3, 'UNKNOWN - ARS not found')
# 
# check_info['sittig_ars'] = (check_sittig_ars, "ARS %s", 0, inventory_sittig_ars)
# 
# snmp_info['sittig_ars'] = ( ".1.3.6.1.4.1.33472.4.16.3.1", [0, 1, 2, 3, 4 ] )
# 
# snmp_scan_functions['sittig_ars'] = \
#     lambda oid: oid(".1.3.6.1.2.1.1.2.0") == ".1.3.6.1.4.1.311.1.1.3.1.2"
# 
# 
from .agent_based_api.v1.type_defs import StringTable
from .agent_based_api.v1 import (
    exists,
    register,
    SNMPTree,
)

def parse_sittig_ars(string_table):
#    if not any(string_table):
#       return None
    return string_table if any(string_table) else None

def discover_sittig_ars(section: Section) -> DiscoveryResult:
    yield Service()

def check_sittig_ars(params, section: Section) -> CheckResult:
#     for line in info:
#         if line[0] == item:
#                 if line[1:] == [ "2", "2", "2", "4" ]: # online, online, bothonline, offlineok
#                     return (0, "OK - online")
#         else:
#             return (2, "CRIT - offline or partially offline")
#             
#         return (3, 'UNKNOWN - ARS not found')
# 

register.snmp_section(
    name = "sittig_ars",
    parse_function=parse_sittig_ars
    service_name="Device status",
    discovery_function=discover_quantum_storage_status,
    check_function=check_quantum_storage_status,
    detect=contains(".1.3.6.1.2.1.1.2.0", ".1.3.6.1.4.1.311.1.1.3.1.2"),
    fetch = SNMPTree(
        base = ".1.3.6.1.4.1.33472.4.16.3.1",
        oids = [
            ,
            "0", # online, online, bothonline, offlineok
            "1", # online
            "2", # bothonline
            "3", # offlineok
            "4"  #         
        ],
    ),
)